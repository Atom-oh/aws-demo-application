apiVersion: v1
kind: ConfigMap
metadata:
  name: job-service-config
  namespace: hirehub
  labels:
    app.kubernetes.io/name: job-service
    app.kubernetes.io/component: backend
data:
  # Spring profiles
  SPRING_PROFILES_ACTIVE: "production"

  # Server configuration
  SERVER_PORT: "8002"
  GRPC_SERVER_PORT: "50052"
  MANAGEMENT_SERVER_PORT: "9002"

  # Database configuration (CQRS - Write)
  SPRING_DATASOURCE_HIKARI_MAXIMUM_POOL_SIZE: "20"
  SPRING_DATASOURCE_HIKARI_MINIMUM_IDLE: "5"
  SPRING_DATASOURCE_HIKARI_CONNECTION_TIMEOUT: "30000"

  # OpenSearch configuration (CQRS - Read)
  OPENSEARCH_USERNAME: "admin"
  OPENSEARCH_INDEX_PREFIX: "hirehub-jobs"

  # Kafka configuration
  SPRING_KAFKA_PRODUCER_BOOTSTRAP_SERVERS: "${KAFKA_BROKERS}"
  SPRING_KAFKA_CONSUMER_GROUP_ID: "job-service-group"

  # Logging
  LOGGING_LEVEL_ROOT: "INFO"
  LOGGING_LEVEL_COM_HIREHUB: "DEBUG"

  # Actuator
  MANAGEMENT_ENDPOINTS_WEB_EXPOSURE_INCLUDE: "health,info,prometheus,metrics"
  MANAGEMENT_ENDPOINT_HEALTH_SHOW_DETAILS: "when_authorized"
  MANAGEMENT_ENDPOINT_HEALTH_PROBES_ENABLED: "true"

  # Tracing
  MANAGEMENT_TRACING_ENABLED: "true"
  MANAGEMENT_OTLP_TRACING_ENDPOINT: "http://otel-collector.observability:4318/v1/traces"
  OTEL_SERVICE_NAME: "job-service"

  # gRPC settings
  GRPC_SERVER_SECURITY_ENABLED: "false"
  GRPC_SERVER_MAX_INBOUND_MESSAGE_SIZE: "4194304"
