# =============================================================================
# DEPRECATED: Self-managed ArgoCD Helm Values
# =============================================================================
# This file is kept for reference only.
#
# HireHub now uses EKS ArgoCD Capability (fully managed by AWS):
# - Terraform: infrastructure/terraform/modules/eks-argocd/
# - No node resources required (runs in EKS control plane)
# - AWS Identity Center (SSO) integration
# - Automatic updates and scaling by AWS
#
# To use EKS ArgoCD Capability, see prod/main.tf:
#   module "eks_argocd" { ... }
#
# For legacy self-managed deployment, see below:
# =============================================================================

# ArgoCD Helm Values for HireHub Platform (Legacy/Reference)
# Reference: https://github.com/argoproj/argo-helm/tree/main/charts/argo-cd
# Chart: argo/argo-cd

# Global settings
global:
  # Demo environment - single replica deployments
  revisionHistoryLimit: 3

# Redis HA disabled for demo
redis-ha:
  enabled: false

# Controller settings
controller:
  replicas: 1
  metrics:
    enabled: true
    serviceMonitor:
      enabled: false  # Enable if Prometheus Operator is installed

# Server settings
server:
  replicas: 1

  # Expose via LoadBalancer for demo environment
  service:
    type: LoadBalancer
    annotations:
      # AWS ALB annotations (uncomment if using AWS Load Balancer Controller)
      # service.beta.kubernetes.io/aws-load-balancer-type: "nlb"
      # service.beta.kubernetes.io/aws-load-balancer-scheme: "internet-facing"

  # Insecure mode for demo (disable TLS termination at ArgoCD)
  # In production, use ingress with TLS
  extraArgs:
    - --insecure

  # Resource limits for demo
  resources:
    requests:
      cpu: 100m
      memory: 128Mi
    limits:
      cpu: 500m
      memory: 512Mi

# Repo Server settings
repoServer:
  replicas: 1
  resources:
    requests:
      cpu: 100m
      memory: 128Mi
    limits:
      cpu: 500m
      memory: 512Mi

# Application Set Controller
applicationSet:
  enabled: true
  replicas: 1

# Notifications Controller (for Slack/email notifications)
notifications:
  enabled: false  # Enable and configure for production

# Dex (SSO) - disabled for demo, use built-in admin
dex:
  enabled: false

# Config settings
configs:
  # Repository credentials (add your Git repo credentials here)
  repositories: {}
    # hirehub-repo:
    #   url: https://github.com/your-org/hirehub
    #   type: git

  # Credential templates
  credentialTemplates: {}

  # ConfigMap settings
  cm:
    # Create admin account
    admin.enabled: "true"

    # Timeout settings
    timeout.reconciliation: 180s

    # Application health assessment
    resource.customizations.health.argoproj.io_Application: |
      hs = {}
      hs.status = "Progressing"
      hs.message = ""
      if obj.status ~= nil then
        if obj.status.health ~= nil then
          hs.status = obj.status.health.status
          if obj.status.health.message ~= nil then
            hs.message = obj.status.health.message
          end
        end
      end
      return hs

  # RBAC settings
  rbac:
    # Default policy for demo - admin access
    policy.default: role:admin

    # Scopes
    scopes: "[groups]"

  # Parameters
  params:
    # Server parameters
    server.insecure: true

  # Secret settings (admin password)
  # Leave empty to use auto-generated initial admin secret
  # Retrieve with: kubectl -n argocd get secret argocd-initial-admin-secret -o jsonpath="{.data.password}" | base64 -d
  secret:
    createSecret: true
