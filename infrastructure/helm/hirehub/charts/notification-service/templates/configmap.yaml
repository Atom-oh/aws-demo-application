{{- if .Values.enabled }}
apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "notification-service.fullname" . }}-config
  namespace: {{ include "notification-service.namespace" . }}
  labels:
    {{- include "notification-service.labels" . | nindent 4 }}
data:
  LOG_LEVEL: {{ .Values.config.logLevel | quote }}
  GRPC_PORT: {{ .Values.config.grpcPort | quote }}
  METRICS_PORT: {{ .Values.config.metricsPort | quote }}
  SERVICE_NAME: {{ include "notification-service.fullname" . | quote }}
  KAFKA_CONSUMER_GROUP: {{ .Values.config.kafkaConsumerGroup | quote }}
  KAFKA_AUTO_OFFSET_RESET: {{ .Values.config.kafkaAutoOffsetReset | quote }}
  # Notification channels
  EMAIL_ENABLED: {{ .Values.channels.email.enabled | quote }}
  EMAIL_PROVIDER: {{ .Values.channels.email.provider | quote }}
  SMS_ENABLED: {{ .Values.channels.sms.enabled | quote }}
  SMS_PROVIDER: {{ .Values.channels.sms.provider | quote }}
  PUSH_ENABLED: {{ .Values.channels.push.enabled | quote }}
  PUSH_PROVIDER: {{ .Values.channels.push.provider | quote }}
  {{- if .Values.keda.enabled }}
  KAFKA_TOPIC: {{ .Values.keda.kafka.topic | quote }}
  {{- end }}
  {{- if .Values.global }}
  {{- if .Values.global.grpc }}
  {{- if .Values.global.grpc.mtls }}
  GRPC_MTLS_ENABLED: {{ .Values.global.grpc.mtls.enabled | quote }}
  {{- end }}
  {{- end }}
  {{- if .Values.global.region }}
  AWS_REGION: {{ .Values.global.region | quote }}
  {{- end }}
  {{- end }}
{{- end }}
