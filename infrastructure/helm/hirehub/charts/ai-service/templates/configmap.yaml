{{- if .Values.enabled }}
apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "ai-service.fullname" . }}-config
  namespace: {{ include "ai-service.namespace" . }}
  labels:
    {{- include "ai-service.labels" . | nindent 4 }}
data:
  LOG_LEVEL: {{ .Values.config.logLevel | quote }}
  GRPC_PORT: {{ .Values.config.grpcPort | quote }}
  HTTP_PORT: {{ .Values.config.httpPort | quote }}
  METRICS_PORT: {{ .Values.config.metricsPort | quote }}
  SERVICE_NAME: {{ include "ai-service.fullname" . | quote }}
  BEDROCK_REGION: {{ .Values.config.bedrockRegion | quote }}
  BEDROCK_MODEL_ID: {{ .Values.config.bedrockModelId | quote }}
  AGENTCORE_ENABLED: {{ .Values.config.agentCoreEnabled | quote }}
  {{- if .Values.config.ragKnowledgeBaseId }}
  RAG_KNOWLEDGE_BASE_ID: {{ .Values.config.ragKnowledgeBaseId | quote }}
  {{- end }}
  {{- if .Values.knowledgeBase.enabled }}
  KNOWLEDGE_BASE_ENABLED: "true"
  KNOWLEDGE_BASE_ID: {{ .Values.knowledgeBase.id | quote }}
  KNOWLEDGE_BASE_REGION: {{ .Values.knowledgeBase.region | quote }}
  {{- end }}
  {{- if .Values.global }}
  {{- if .Values.global.grpc }}
  {{- if .Values.global.grpc.mtls }}
  GRPC_MTLS_ENABLED: {{ .Values.global.grpc.mtls.enabled | quote }}
  {{- end }}
  {{- end }}
  {{- if .Values.global.region }}
  AWS_REGION: {{ .Values.global.region | quote }}
  {{- end }}
  {{- end }}
{{- end }}
