{{- if .Values.enabled }}
apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "resume-service.fullname" . }}-config
  namespace: {{ include "resume-service.namespace" . }}
  labels:
    {{- include "resume-service.labels" . | nindent 4 }}
data:
  LOG_LEVEL: {{ .Values.config.logLevel | quote }}
  GRPC_PORT: {{ .Values.config.grpcPort | quote }}
  HTTP_PORT: {{ .Values.config.httpPort | quote }}
  METRICS_PORT: {{ .Values.config.metricsPort | quote }}
  SERVICE_NAME: {{ include "resume-service.fullname" . | quote }}
  PII_MODEL: {{ .Values.config.piiModel | quote }}
  {{- if .Values.config.vllmEndpoint }}
  VLLM_ENDPOINT: {{ .Values.config.vllmEndpoint | quote }}
  {{- end }}
  S3_BUCKET: {{ .Values.s3.bucket | quote }}
  S3_REGION: {{ .Values.s3.region | quote }}
  {{- if .Values.global }}
  {{- if .Values.global.grpc }}
  {{- if .Values.global.grpc.mtls }}
  GRPC_MTLS_ENABLED: {{ .Values.global.grpc.mtls.enabled | quote }}
  {{- end }}
  {{- end }}
  {{- if .Values.global.region }}
  AWS_REGION: {{ .Values.global.region | quote }}
  {{- end }}
  {{- end }}
{{- end }}
